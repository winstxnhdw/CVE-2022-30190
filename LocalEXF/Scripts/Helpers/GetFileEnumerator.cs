using System;
using System.Collections.Generic;

public static class GetFileEnumerator {
    public static IEnumerable<string> IgnorePrivilegedFiles(IEnumerable<string> fileEnumerable) {
        using IEnumerator<string> fileEnumerator = fileEnumerable.GetEnumerator();

        while (true) {
            try {
                if (!fileEnumerator.MoveNext()) break;
            }

            catch (UnauthorizedAccessException) {
                continue;
            }

            yield return fileEnumerator.Current;
        }
    }
}